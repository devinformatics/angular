<div class="modal-header">
  <h5 class="modal-title">{{ modalTitle }}</h5>
  <button id="settingmodelwindow" type="button" class="close" aria-label="Close" data-toggle="modal" data-target="#wnctyModal">
    <span aria-hidden="true" (click)="redirectComponent()">&times;</span>
  </button>
</div>
<div class="modal-body">
  <div class="settings-page">
    <div class="container page">
      <div class="row">
        <div class="col-md-12  col-xs-12" *ngIf="(UserInfo | async) as userDetail">

          <div class="alert alert-danger" *ngIf="errorMessage">
            {{errorMessage}}
          </div>

          <div class="alert alert-success" *ngIf="successMessage">
            {{successMessage}}
          </div>
          <div class="mb-3">
            <label for="username">Username : </label> {{userDetail.firstName}} {{userDetail.lastName}}
            <!--
  <div class="input-group">
    <div class="input-group-prepend">
      <span class="input-group-text"></span>
    </div>
    <input type="text" disabled formControlName="userName" class="form-control" id="username" placeholder="Username" [ngClass]="{'is-invalid':(userSettingForm.get('userName').errors?.required) && userSettingForm.get('userName').dirty}">

    <div class="invalid-feedback" style="width: 100%;">
      <span *ngIf="userSettingForm.get('userName').errors?.required && userSettingForm.get('userName').dirty">Your username is required.</span>
    </div>
  </div>
  -->
          </div>

          <div class="mb-3">
            <label for="role">Role : </label> {{userDetail.role}}
            <!--
  <input type="text" formControlName="role" disabled class="form-control" id="Role" placeholder="Role">
  -->
          </div>
          <div class="mb-3">
            <label for="email">Email : </label> {{userDetail.email}}
            <!--
  <input type="email" disabled formControlName="email" (change)="checkEmail()" class="form-control" id="email" placeholder="you@example.com" [ngClass]="{'is-invalid':(userSettingForm.get('email').errors?.required || userSettingForm.get('email').errors?.email) && userSettingForm.get('email').dirty}">
  <div class="invalid-feedback">
    <span *ngIf="userSettingForm.get('email').errors?.required  && userSettingForm.get('email').dirty">Please enter  email address for shipping updates.</span>
    <span *ngIf="userSettingForm.get('email').errors?.email  && userSettingForm.get('email').dirty">Please enter a valid email address for shipping updates.</span>
  </div>
  -->
          </div>
          <div class="mb-3">
            <label for="phone">Phone : </label> {{userDetail.phone}}
            <!--
  <input type="text" disabled formControlName="phone" class="form-control" id="Phone" placeholder="Phone" [ngClass]="{'is-invalid':(userSettingForm.get('phone').errors?.required || userSettingForm.get('phone').errors?.minlength || userSettingForm.get('phone').errors?.maxlength) && userSettingForm.get('phone').dirty}">
  <div class="invalid-feedback">
    <span *ngIf="userSettingForm.get('phone').errors?.required && userSettingForm.get('phone').dirty">Phone is required.</span>
    <span *ngIf="userSettingForm.get('phone').errors?.minlength  && userSettingForm.get('phone').dirty">Minlength should be 7 characters.</span>
    <span *ngIf="userSettingForm.get('phone').errors?.maxlength  && userSettingForm.get('phone').dirty">Maxlength should be 10 characters.</span>
  </div>
  -->
          </div>
          <form class="needs-validation" novalidate="" (ngSubmit)="submit()" [formGroup]="userSettingForm">
            <fieldset class="user-setting-fieldset">
              <legend class="user-setting-legend">Client Representative</legend>
              <div class="mb-3">
                <label for="email">Email <span class="text-muted"></span></label> 

                <input type="email" formControlName="email" (change)="checkEmail()" class="form-control" id="email" placeholder="you@example.com" [ngClass]="{'is-invalid':(userSettingForm.get('email').errors?.required || userSettingForm.get('email').errors?.email) && userSettingForm.get('email').dirty}">
                <div class="invalid-feedback">
                  <span *ngIf="userSettingForm.get('email').errors?.required  && userSettingForm.get('email').dirty">Please enter  email address for shipping updates.</span>
                  <span *ngIf="userSettingForm.get('email').errors?.email  && userSettingForm.get('email').dirty">Please enter a valid email address for shipping updates.</span>
                </div>

              </div>
              <div class="mb-3">
                <label for="phone"> Phone <span class="text-muted">(Optional)</span></label>
                <input type="text" formControlName="phone" class="form-control" id="Phone" placeholder="Phone" [ngClass]="{'is-invalid':(userSettingForm.get('phone').errors?.minlength || userSettingForm.get('phone').errors?.maxlength) && userSettingForm.get('phone').dirty}">
                <div class="invalid-feedback">
                  <span *ngIf="userSettingForm.get('phone').errors?.minlength  && userSettingForm.get('phone').dirty">Minlength should be 7 characters.</span>
                  <span *ngIf="userSettingForm.get('phone').errors?.maxlength  && userSettingForm.get('phone').dirty">Maxlength should be 10 characters.</span>
                </div>
              </div>
              <div class="mb-3">
                <label for="address1"> Address<span class="text-danger">*</span></label>
                <input type="text" formControlName="address1" class="form-control" id="Address1 " placeholder="Address1" [ngClass]="{'is-invalid':(userSettingForm.get('address1').errors?.required || userSettingForm.get('address1').errors?.minlength || userSettingForm.get('address1').errors?.maxlength) && userSettingForm.get('address1').dirty}">
                <div class="invalid-feedback">
                  <span *ngIf="userSettingForm.get('address1').errors?.required && userSettingForm.get('address1').dirty">Please enter a valid Address1.</span>
                  <span *ngIf="userSettingForm.get('address1').errors?.minlength  && userSettingForm.get('address1').dirty">Minlength should be 10 characters.</span>
                  <span *ngIf="userSettingForm.get('address1').errors?.maxlength  && userSettingForm.get('address1').dirty">Maxlength should be 255 characters.</span>
                </div>
              </div>

              <div class="mb-3">
                <label for="address2">   Suite, Floor, Apartment <span class="text-muted">(Optional)</span></label>
                <input type="text" formControlName="address2" class="form-control" id="Address2 " placeholder="Address2" [ngClass]="{'is-invalid':(userSettingForm.get('address2').errors?.minlength  || userSettingForm.get('address2').errors?.maxlength) && userSettingForm.get('address2').dirty}">
                <div class="invalid-feedback">
                  <span *ngIf="userSettingForm.get('address2').errors?.minlength  && userSettingForm.get('address2').dirty">Minlength should be 10 characters.</span>
                  <span *ngIf="userSettingForm.get('address2').errors?.maxlength  && userSettingForm.get('address2').dirty">Maxlength should be 255 characters.</span>
                </div>
              </div>
              <div class="mb-3">
                <label for="city">City<span class="text-danger">*</span></label>
                <input type="text" formControlName="city" class="form-control" id="city " placeholder="City" [ngClass]="{'is-invalid':(userSettingForm.get('city').errors?.required || userSettingForm.get('city').errors?.maxlength) && userSettingForm.get('city').dirty}">
                <div class="invalid-feedback">
                  <span *ngIf="userSettingForm.get('city').errors?.required && userSettingForm.get('city').dirty">Please enter a valid City.</span>
                  <span *ngIf="userSettingForm.get('city').errors?.maxlength && userSettingForm.get('city').dirty">Maxlength should be 20 characters.</span>
                </div>
              </div>
              <div class="row">
                <!--
        <div class="col-md-5 mb-3">
          <label for="country">Country</label>
          <select class="custom-select d-block w-100" formControlName="country" id="country" [ngClass]="{'is-invalid':(userSettingForm.get('country').errors?.required) && userSettingForm.get('country').dirty}">
            <option value="">Choose...</option>
            <option value="US">United States</option>
          </select>
          <div class="invalid-feedback">
            <span *ngIf="userSettingForm.get('country').errors?.required && userSettingForm.get('country').dirty">Please select a valid country.</span>
          </div>
        </div>
        -->
                <div class="col-md-6 mb-3">
                  <label for="state">State<span class="text-danger">*</span></label>
                  <select class="custom-select d-block w-100" formControlName="state" id="state" [ngClass]="{'is-invalid':(userSettingForm.get('state').errors?.required) && userSettingForm.get('state').dirty}">
                    <option value="">Choose...</option>
                    <option *ngFor="let state of states" [ngValue]="state.abbreviation">
                      {{ state.name }}
                    </option>
                  </select>

                  <div class="invalid-feedback">
                    <span *ngIf="userSettingForm.get('state').errors?.required && userSettingForm.get('state').dirty">Please provide a valid state.</span>
                  </div>
                </div>

                <div class="col-md-6 mb-3">
                  <label for="zip">Zip<span class="text-danger">*</span></label>
                  <input type="text" class="form-control" id="zip" formControlName="zip" placeholder="" [ngClass]="{'is-invalid':(userSettingForm.get('zip').errors?.required || userSettingForm.get('zip').errors?.max) && userSettingForm.get('zip').dirty}">
                  <div class="invalid-feedback">
                    <span *ngIf="userSettingForm.get('zip').errors?.required && userSettingForm.get('zip').dirty">Zip code required.</span>
                    <span *ngIf="userSettingForm.get('zip').errors?.max && userSettingForm.get('zip').dirty">Maxlength should be 6 characters.</span>
                  </div>
                </div>
              </div>
              <hr class="mb-4">
              <h4 class="mb-3">Application  Settings</h4>
              <div class="custom-control custom-checkbox">
                <input type="checkbox" formControlName="alert_setting" class="custom-control-input" id="alert_setting">
                <label class="custom-control-label" for="alert_setting">Display/Hide Alerts</label>
              </div>
              <div class="custom-control custom-checkbox">
                <input type="checkbox" formControlName="email_setting" class="custom-control-input" id="email_setting">
                <label class="custom-control-label" for="email_setting">Send Email</label>
              </div>

              <input type="hidden" formControlName="user_id" class="custom-control-input" id="user_id">
              <hr class="mb-4">
              <button class="btn btn-primary btn-lg btn-block" type="submit">Update Settings</button>

            </fieldset>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
